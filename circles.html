<!DOCTYPE html>
<html>
<head>
    <title>Circles</title>
    <!-- Load the Paper.js library -->
    <script type="text/javascript" src="node_modules/paper/dist/paper-full.js"></script>
    <!-- Load the Howler.js library -->
    <script type="text/javascript" src="node_modules/howler/dist/howler.js"></script>
    <link rel="stylesheet" type="text/css" href="circles.css">

    <!-- Define inlined PaperScript associate it with myCanvas -->
    <script type="text/paperscript" canvas="myCanvas">

        //Creates a new sound
        var sound1 = new Howl({
            src: ['sounds/bubbles.mp3']
        });

        var sound2 = new Howl({
            src: ['sounds/clay.mp3']
        });

        var circles = [];

        function createRandomPoint() {
            // Creates a Point object using the max width(x coordinate) and the max height(y coordinate) of the canvas' viewport.
            var maxPoint = new Point(view.size.width, view.size.height);
            // Generates a Point object with random numbers between 0 and 1 (not inclusive) for its x and y coordinates.
            var randomPoint = Point.random();
            // Creates a Point Object with its x and y coordinates between 0 and max width and max height respectively.
            var point = maxPoint * randomPoint;
            // Transform the x coordinate to an integer
            var x = Math.ceil(point.x);
            // Transform the y coordinate to an integer
            var y = Math.ceil(point.y);
            point.x = x;
            point.y = y;
            return point;
        }

        function onKeyDown(e) {
            var point = createRandomPoint();
            // Creates a circle at random points of the window each time a key is pressed
            var newCircle = new Path.Circle(point, 500);
            if (e.key === "a") {
                sound1.play();
                newCircle.fillColor = "purple";
            }
            else if (e.key === "s") {
                sound2.play();
                newCircle.fillColor = "#16a085";
            } else {
                newCircle.fillColor = "orange";
            }
            circles.push(newCircle);
        }

        //Takes care of what happens in each frame of the animation
        function onFrame() {
            // Looping through all the circles and changing their fill color
            for (var i = 0; i < circles.length; i++) {
                circles[i].fillColor.hue += 1;
                circles[i].scale(.9);
            }
        }
    </script>
</head>
<body>
<canvas id="myCanvas" resize></canvas>
</body>
</html>
